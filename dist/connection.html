<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/css/main.css">
    <title>Document</title>
</head>
<body>
<div class="transition">
    <h3><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></h3>
    <h2 class="title-two">–ú–ï–¢–û–î–ò–ß–ï–°–ö–ò–ï –†–ê–ó–†–ê–ë–û–¢–ö–ò</h2>
</div>
<header class="header">
  <input type="checkbox" id="burger-toggle" class="burger-toggle">
  <label for="burger-toggle" class="burger-btn">
    <span class="burger-line"></span>
    <span class="burger-line"></span>
    <span class="burger-line"></span>
  </label>

  <nav class="nav">
    <ul class="menu">
      <li class="menu-item">
        <a href="#" class="menu-link">–ú–ï–¢–û–î–ò–ß–ï–°–ö–û–ï –ü–û–†–¢–§–û–õ–ò–û</a>
        <ul class="submenu">
          <li><a href="norm-docum.html">–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∞–≤–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a></li>
          <li><a href="literature.html">–ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</a></li>
          <li><a href="documentation.html">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Å–Ω–æ–≤–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</a></li>
          <li><a href="developments.html">–ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</a></li>
        </ul>
      </li>

      <li class="menu-item">
        <a href="#" class="menu-link">–î–õ–Ø –ö–û–õ–õ–ï–ì –ò –†–û–î–ò–¢–ï–õ–ï–ô</a>
        <ul class="submenu">
          <li><a href="parents.html">–î–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π</a></li>
          <li><a href="teachers.html">–î–ª—è –∫–ª–∞—Å—Å–Ω—ã—Ö —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π</a></li>
          <li><a href="teachers.html"></a></li>
        </ul>
      </li>

      <li class="menu-item">
        <a href="students.html" class="menu-link">–î–õ–Ø –û–ë–£–ß–ê–Æ–©–ò–•–°–Ø</a>
      </li>

      <li class="menu-item">
        <a href="achievements.html" class="menu-link">–î–û–°–¢–ò–ñ–ï–ù–ò–Ø</a>
      </li>

      <li class="menu-item">
        <a href="connection.html" class="menu-link">–û–ë–†–ê–¢–ù–ê–Ø –°–í–Ø–ó–¨</a>
      </li>

      <li class="menu-item">
        <a href="blog.html" class="menu-link">–ë–õ–û–ì</a>
      </li>
    </ul>
  </nav>
</header>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—é</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="comments.scss">
</head>
<body>
<div class="container">
    <h1>–ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò</h1>
</div>
<div class="container">
    <form id="commentForm" class="comment-form">
        <div class="form-group">
            <label for="userName" class="form-label">–í–∞—à–µ –∏–º—è:</label>
            <input type="text" id="userName" name="name" class="form-input" placeholder="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?" required>
        </div>

        <div class="form-group">
            <label for="userComment" class="form-label">–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
            <textarea id="userComment" name="comment" class="form-textarea" placeholder="–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏ –æ —Å–∞–π—Ç–µ..." maxlength="500" required></textarea>
            <div id="charCounter" class="char-count">0/500</div>
        </div>

        <button type="submit" class="submit-btn">
            <span class="btn-text">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</span>
        </button>
    </form>

    <section class="comments-section">
        <h3 class="comments-subtitle">üí≠ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
        <div class="comments-list" id="commentsContainer">
            
            <div class="no-comments">–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –û—Å—Ç–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π!</div>
        </div>
    </section>
</div>

<script src="comments.js"></script>
</body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const form = document.getElementById('commentForm');
        const commentInput = document.getElementById('userComment');
        const charCounter = document.getElementById('charCounter');
        const commentsContainer = document.getElementById('commentsContainer');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        loadComments();
        updateCharCounter();

        // –°–æ–±—ã—Ç–∏—è
        commentInput.addEventListener('input', updateCharCounter);
        form.addEventListener('submit', handleSubmit);

        // –§—É–Ω–∫—Ü–∏–∏
        function updateCharCounter() {
            const length = commentInput.value.length;
            charCounter.textContent = `${length}/500`;
            charCounter.className = `char-count${length > 450 ? ' warning' : length >= 500 ? ' error' : ''}`;
        }

        function handleSubmit(event) {
            event.preventDefault();

            const formData = new FormData(form);
            const name = formData.get('name').trim();
            const comment = formData.get('comment').trim();

            if (!validateForm(name, comment)) return;

            const newComment = createComment(name, comment);

            saveToStorage(newComment);
            displayComment(newComment);
            resetForm();
            scrollToComment();
        }

        function validateForm(name, comment) {
            if (!comment) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π');
                commentInput.focus();
                return false;
            }
            return true;
        }

        function createComment(name, text) {
            return {
                id: Date.now(),
                name: name || '–ê–Ω–æ–Ω–∏–º',
                text: text,
                date: formatDate(new Date())
            };
        }

        function formatDate(date) {
            return date.toLocaleString('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function saveToStorage(comment) {
            const comments = getCommentsFromStorage();
            comments.unshift(comment);
            localStorage.setItem('eventComments', JSON.stringify(comments));
        }

        function getCommentsFromStorage() {
            return JSON.parse(localStorage.getItem('eventComments') || '[]');
        }

        function loadComments() {
            const comments = getCommentsFromStorage();

            if (comments.length === 0) return;

            commentsContainer.innerHTML = '';
            comments.forEach(displayComment);
        }

        function displayComment(comment) {
            // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ "–Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤" –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            const noComments = commentsContainer.querySelector('.no-comments');
            if (noComments) noComments.remove();

            const commentElement = createCommentElement(comment);
            commentsContainer.prepend(commentElement);
        }

        function createCommentElement(comment) {
            const div = document.createElement('div');
            div.className = 'comment';
            div.innerHTML = `
            <div class="comment-header">
                <span class="comment-author">${escapeHtml(comment.name)}</span>
                <span class="comment-date">${comment.date}</span>
            </div>
            <div class="comment-text">${escapeHtml(comment.text)}</div>
        `;
            return div;
        }

        function resetForm() {
            form.reset();
            updateCharCounter();
        }

        function scrollToComment() {
            const firstComment = document.querySelector('.comment');
            if (firstComment) {
                firstComment.scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest'
                });
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    });
</script>
<footer>
  <p>¬©2025 Dolgova</p>
</footer>
</body>
</html>
